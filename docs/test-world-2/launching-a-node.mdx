---
title: Launching Nodes
hide_title: true
description: Node setup notes for Testworld Mission 2.0, an incentivized testnet to test zkApps and network resilience in preparation for a hard fork that will enable improved zkApp programmability on Mina Mainnet.
keywords:
  - Block Producer
  - Testworld 2
  - upgrade
  - zkApps
  - node operator
---

# Testworld Mission 2.0 Protocol Performance Testing
The Testworld Mission 2.0: Protocol Performance Testing program is here. The goal of this program is to stress test the protocol and network with Mina community members to have a high level of confidence for Mina’s upcoming mainnet upgrade that will enable easier zkApps on Mina Mainnet.

The Program gathers experienced node operators to provide the network backbone for the Testworld 2.0 testnet. Participants will perform various node operation testing tasks for different grants. Participants can perform multiple node operation tasks.


:::note

Please refer to the [Discord](https://discord.com/channels/484437221055922177/1103364666517901342) channel for questions or to find any configuration options, such as the seeds.txt file, which are not detailed below.

:::

## Launching the Nodes

Testworld Mission 2.0 nodes must run with the flags specified here in order to conduct the testing.  

1. [Block Producers](#block-producer)
2. [Load Testers](#load-tester)
3. [SNARK Workers](#snark-worker)
4. [SNARK Coordinators](#snark-coordinator)
5. [Archive Node](#archive-node) 

For more information about running nodes see the [node operators](https://docs.minaprotocol.com/node-operators) section of the Mina docs.

Use the latest Testworld Mission 2.0 release, this release can be found at [here](https://github.com/MinaProtocol/mina/releases/tag/2.0.0rampup5), we will announce any future releases on this [Discord](https://discord.com/channels/484437221055922177/1103364666517901342) channel and they will be located in [releases](https://github.com/MinaProtocol/mina/releases) directory.

## Block Producer
The hardware requirements for Block Producers are located [here](./technical-requirements#block-producer)

The Block Producer node should be configured with the following flags:
```
--log-json
--log-snark-work-gossip true
--internal-tracing
--insecure-rest-server
--log-level Debug
--file-log-level Debug
--config-directory <path to the mina configuration directory> 
--external-ip  <external server IP> 
--itn-keys  f1F38+W3zLcc45fGZcAf9gsZ7o9Rh3ckqZQw6yOJiS4=,6GmWmMYv5oPwQd2xr6YArmU1YXYCAxQAxKH7aYnBdrk=,ZJDkF9EZlhcAU1jyvP3m9GbkhfYa0yPV+UdAqSamr1Q=,NW2Vis7S5G1B9g2l9cKh3shy9qkI1lvhid38763vZDU=,Cg/8l+JleVH8yNwXkoLawbfLHD93Do4KbttyBS7m9hQ=
--itn-graphql-port 3089
--uptime-submitter-key  <uptime-keyfile path> (**same key as block producer key**) 
--uptime-url https://block-producers-uptime-itn.minaprotocol.tools/v1/submit 
--metrics-port 10001 (**This flag is used when using Kubernetes. The port should be closed from external access**) 
--enable-peer-exchange  true
--libp2p-keypair <keyfile path> (**libp2p keypair pre-generated by the Node Operator**)
--log-precomputed-blocks true
--max-connections 200
--peer-list-url  (**seeds.txt URL will be distributed prior to launch**)
--generate-genesis-proof  true
--block-producer-key <keyfile path> (**keys will be distributed prior to launch**)
--node-status-url https://nodestats-itn.minaprotocol.tools/submit/stats 
--node-error-url https://nodestats-itn.minaprotocol.tools/submit/stats 
--file-log-rotations 500
```
and the following environment variables:
```
RAYON_NUM_THREADS:6
UPTIME_PRIVKEY_PASS
MINA_LIBP2P_PASS
MINA_PRIVKEY_PASS
```

## Load Tester
The hardware requirements for Load Testers are located [here](./technical-requirements#load-testing)

The Load Tester nodes should be configured with the following flags:
```
--log-json
--log-snark-work-gossip true
--internal-tracing
--insecure-rest-server
--log-level Debug
--file-log-level Debug
--config-directory <path to mina config> 
--external-ip  <external server IP> 
--itn-keys  f1F38+W3zLcc45fGZcAf9gsZ7o9Rh3ckqZQw6yOJiS4=,6GmWmMYv5oPwQd2xr6YArmU1YXYCAxQAxKH7aYnBdrk=,ZJDkF9EZlhcAU1jyvP3m9GbkhfYa0yPV+UdAqSamr1Q=,NW2Vis7S5G1B9g2l9cKh3shy9qkI1lvhid38763vZDU=,Cg/8l+JleVH8yNwXkoLawbfLHD93Do4KbttyBS7m9hQ=
--itn-graphql-port 3089
--uptime-submitter-key  <uptime-keyfile path> 
--uptime-url https://block-producers-uptime-itn.minaprotocol.tools/v1/submit 
--metrics-port 10001 (**This flag is used when using Kubernetes. The port should be closed from external access**)
--enable-peer-exchange  true
--libp2p-keypair <keyfile path> (**libp2p keypair pre-generated by the Node Operator**)
--log-precomputed-blocks true
--max-connections 200
--peer-list-url  (**seeds.txt URL will be distributed prior to launch**)
--generate-genesis-proof  true
--block-producer-key <keyfile path> (**keys will be distributed prior to launch**)
--node-status-url https://nodestats-itn.minaprotocol.tools/submit/stats 
--node-error-url https://nodestats-itn.minaprotocol.tools/submit/stats
--file-log-rotations 500
```

and the following environment variables:
```
RAYON_NUM_THREADS:6
UPTIME_PRIVKEY_PASS
MINA_LIBP2P_PASS
MINA_PRIVKEY_PASS
```

## SNARK Worker
The hardware requirements for SNARK Workers are located [here](./technical-requirements#snark-work)

The SNARK workers should be configured with the following flags and will connect to the SNARK Coordinator:
```
internal 
snark-worker 
--proof-level full
--shutdown-on-disconnect false
--daemon-address <snark coordinator IP and port - IP:port>
```

and the following environment variables:
```
RAYON_NUM_THREADS:8
```

## SNARK Coordinator
The hardware requirements for SNARK Coordinators are located [here](./technical-requirements#snark-coordinator)

The SNARK Coordinators should be configured with the following flags:
```
--log-json
--log-snark-work-gossip true
--internal-tracing
--insecure-rest-server
--log-level Debug
--file-log-level Debug
--config-directory <path>
--external-ip  <external server IP>
--itn-graphql-port 3089
--uptime-submitter-key  <uptime-keyfile path>
--uptime-url https://block-producers-uptime-itn.minaprotocol.tools/v1/submit
--metrics-port 10001 (**This flag is used when using Kubernetes. The port should be closed from external access**)
--enable-peer-exchange  true
--libp2p-keypair <keyfile path> (**libp2p keypair pre-generated by the Node Operator**)
--log-precomputed-blocks true
--max-connections 200
--peer-list-url (**seeds.txt URL will be distributed prior to launch**)
--node-stats-url https://nodestats-itn.minaprotocol.tools/submit/stats 
--node-error-url https://nodestats-itn.minaprotocol.tools/submit/stats 
--run-snark-coordinator <public key> (**keys be distributed prior to launch**)
--snark-worker-fee 0.001 
--work-selection seq
--file-log-rotations 500
```

and the following environment variables:
```
RAYON_NUM_THREADS:6
UPTIME_PRIVKEY_PASS
MINA_LIBP2P_PASS
```


## Archive Node
The hardware requirements for Archive Nodes are located [here](./technical-requirements#archive-node)

The Archive node requires a non block producing node and PostgreSQL database, for more information about running Archive Nodes see [Archive Node](https://docs.minaprotocol.com/node-operators/archive-node). 

The PostgreSQL database requires two schemas:

1. The PostgreSQL schema used by the Mina archive database can be found [here](https://github.com/MinaProtocol/mina/blob/55b78189c46e1811b8bdb78864cfa95409aeb96a/src/app/archive/create_schema.sql). 
2. The PostgreSQL schema extensions to support zkApp commands can be found [here](https://github.com/MinaProtocol/mina/blob/55b78189c46e1811b8bdb78864cfa95409aeb96a/src/app/archive/zkapp_tables.sql).


The non block producing node should be configured with the following flags:
```
--log-json
--internal-tracing
--insecure-rest-server
--log-level Debug
--file-log-level Debug
--config-directory <path to mina config> 
--external-ip  <external server IP> 
--itn-keys  (**keys will be distributed prior to launch**)
--itn-graphql-port 3089
--uptime-submitter-key  <uptime-keyfile path> (** self-generated private key for uptime service**)
--uptime-url https://block-producers-uptime-itn.minaprotocol.tools/v1/submit 
--metrics-port 10001 (**This flag is used when using Kubernetes. The port should be closed from external access**)
--enable-peer-exchange  true
--libp2p-keypair <keyfile path> (**libp2p keypair pre-generated by the Node Operator**)
--log-precomputed-blocks true
--max-connections 200
--peer-list-url (**seeds.txt URL will be distributed prior to launch**)
--generate-genesis-proof  true
--node-stats-url https://nodestats-itn.minaprotocol.tools/submit/stats 
--node-error-url https://nodestats-itn.minaprotocol.tools/submit/stats
--file-log-rotations 500
--archive-address <archive_address>:<archive_port - use 3086>
```
and the following environment variables:
```
RAYON_NUM_THREADS:6
UPTIME_PRIVKEY_PASS
MINA_LIBP2P_PASS
MINA_PRIVKEY_PASS
```
This non block producing node will connect to the archive node with the addresses specificied in the `archive-address` flag, using `archive port` used by the archive node.

The archive node command is:

```
mina-archive run --metrics-port <port> --postgres-uri postgres://<postgres user>:<postgres password>@<postgres address>:<postgres port>/<postgres db> --server-port <archive port - use 3086>

```

## Port configuration
Nodes need to have the following ports public (accessible with a node’s external ip):

- libp2p port use 8302 by default
- itn-graphql-port configured to 3089


## Generation of libp2p keypair

Each node within the network must possess its own distinct libp2p key pair. This requirement extends to block producer nodes as well, despite their utilization of a common block production key. Every node operator must generate a unique libp2p keys locally on their respective machines using the following command:

```
mina libp2p generate-keypair -privkey-path <path-to-the-key-file>

```

## Node Restarts
All nodes to be set up such that they restart on crash.

For detailed information on how to setup automatic restart on crash please refer to [Start a mina node with auto-restart flows](https://docs.minaprotocol.com/node-operators/connecting-to-the-network#start-a-mina-node-with-auto-restart-flows).

## Feedback and Questions

We have set up a dedicated Discord channel [#testworld-2](https://discord.com/channels/484437221055922177/1103364666517901342), where you can provide feedback and ask questions related to the Testworld Mission 2.0: Protocol Performance Testing program. We look forward to hearing from you!
